!function(){"use strict";var e=angular.module("model",["Services","ngSanitize"]);e.controller("Ctrl",["$scope","$http","$timeout","Services",function(e,o,t,a){function n(){s.close()}e.temp=[],e.new_marker=[],e.data_real=[],e.cant_rows="10",e.mapa="full",e.header_search=!0,e.load=function(o,t,n){void 0==o&&(o=""),a.Load(o,t,n).then(function(o){e.data_load=o.data,e.to=o.to,e.total=o.total,e.last_page=o.last_page,e.current_page=o.current_page,e.next_page_url=o.next_page_url,e.prev_page_url=o.prev_page_url,null!==e.prev_page_url&&(e.prev_page_url=e.prev_page_url.replace("?page=","")),null!==e.next_page_url&&(e.next_page_url=e.next_page_url.replace("?page=",""))},function(e){})},e.load_services=function(o,t,n){void 0==o&&(o=""),a.Load_Services(o,t,n).then(function(o){e.data_load_services=o.data,e.to=o.to,e.total=o.total,e.last_page=o.last_page,e.current_page=o.current_page,e.next_page_url=o.next_page_url,e.prev_page_url=o.prev_page_url,null!==e.prev_page_url&&(e.prev_page_url=e.prev_page_url.replace("?page=","")),null!==e.next_page_url&&(e.next_page_url=e.next_page_url.replace("?page=",""))},function(e){})},e.load_services("",10,1),e.init=function(){e.load("",200,1)},e.show_panel=!0,e.show_detalle=!1,e.disable_button=!1;var r,s=null;s=new google.maps.InfoWindow;var l=null,c=null,d=[{featureType:"administrative.country",elementType:"geometry",stylers:[{visibility:"simplified"},{hue:"#ff0000"}]},{featureType:"poi",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"poi.attraction",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"poi.business",elementType:"all",stylers:[{visibility:"off"}]}];e.Map=function(){r=new google.maps.Map(document.getElementById("mapa"),{center:{lat:-12.046629,lng:-77.0214337},zoom:11,styles:d}),s=new google.maps.InfoWindow,google.maps.event.addListener(r,"click",function(){n()}),l=new google.maps.DirectionsRenderer,c=new google.maps.DirectionsService},e.Map(),e.initMap=function(){void 0!=e.search_entidad&&""!=e.search_entidad?e.load(e.search_entidad,5,1):e.load("","0",1)},e.initMap(),e.resize=function(e){google.maps.event.addListenerOnce(e,"bounds_changed",function(){google.maps.event.trigger(e,"resize");e.getBounds()})},e.getKilometros=function(e,o,t,a){function n(e){return e*Math.PI/180}var i=n(t-e),r=n(a-o),s=Math.sin(i/2)*Math.sin(i/2)+Math.cos(n(e))*Math.cos(n(t))*Math.sin(r/2)*Math.sin(r/2);return(2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s))*6378.137).toFixed(3)},e.location=function(){navigator.geolocation?navigator.geolocation.getCurrentPosition(function(o){e.posicion_actual={lat:o.coords.latitude,lng:o.coords.longitude};var t="https://maps.googleapis.com/maps/api/geocode/json?latlng="+e.posicion_actual.lat+","+e.posicion_actual.lng+"&sensor=false",a={url:"/assets/app/images/position_actual.png",size:new google.maps.Size(50,50),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(0,40)},n=new google.maps.Marker({position:e.posicion_actual,map:r,icon:a});$.getJSON(t).done(function(o){e.input_start=o.results[0].formatted_address,e.$digest(),e.indicaciones()}),r.setZoom(18),r.panTo(n.position)},function(){e.handleLocationError(!0,s,r.getCenter())}):e.handleLocationError(!1,s,r.getCenter())},e.toggle_Marker=function(o){if(console.log("Ingreso el ID: "+o),e.id=document.getElementById(o),e.id.checked=!e.id.checked,$("#"+o).is(":checked")){for(var t=e.data_real.length;t--;)if(e.data_real[t].id_services===o){var a="#"+e.data_real[t].id+"-"+o;$(a).show()}else console.log("============="),console.log(e.data_real[t].id_services),console.log("=============");for(var t=0;t<e.new_marker.length;t++)e.new_marker[t].type===o&&e.new_marker[t].setVisible(!0)}else{for(var t=e.data_real.length;t--;)if(e.data_real[t].id_services===o){var a="#"+e.data_real[t].id+"-"+o;$(a).hide()}else console.log("============="),console.log(e.data_real[t].id_services),console.log("=============");for(var n=0;n<e.new_marker.length;n++)e.new_marker[n].type===o&&e.new_marker[n].setVisible(!1)}},e.indicaciones=function(){if(!e.input_start||!e.input_end)return void alert("Start and End addresses are required");var o={origin:e.input_start,destination:e.input_end,travelMode:google.maps.DirectionsTravelMode.DRIVING,unitSystem:google.maps.DirectionsUnitSystem.METRIC,provideRouteAlternatives:!1};c.route(o,function(o,t){t==google.maps.DirectionsStatus.OK?(l.setMap(r),l.setDirections(o),e.origen=o.request.origin,e.destino=o.request.destination,e.indicacion_detalle=!0,e.warning=o.routes[0].warnings[0],e.distancia=o.routes[0].legs[0].distance.text,e.duracion=o.routes[0].legs[0].duration.text,e.ruta_general=o.routes[0].summary,e.ruta_detalle=o.routes[0].legs[0].steps,console.log(o),e.$digest()):(console.log(o,t),alert("There is no directions available between these two points"))})},e.go_position=function(){console.log(e.data_load[i]),$.getJSON(geocoding).done(function(o){var t=o.results[0].formatted_address,a=e.data_load[3].direccion;if(!t||!a)return void alert("Start and End addresses are required");var n={origin:t,destination:a,travelMode:google.maps.DirectionsTravelMode.WALKING,unitSystem:google.maps.DirectionsUnitSystem.METRIC,provideRouteAlternatives:!1};c.route(n,function(e,o){console.log(e),o==google.maps.DirectionsStatus.OK?(l.setMap(r),l.setPanel($("#directions_panel").get(0)),l.setDirections(e)):(console.log(e,o),alert("There is no directions available between these two points"))})})},e.del=function(o){e.data_load.splice(o,1)},e.del_temp=function(o){e.data_real.splice(o,1)},e.setMapOnAll=function(o){for(var t=0;t<e.new_marker.length;t++)e.new_marker[t].setMap(o)},e.clearMarkers=function(){e.setMapOnAll(null)},e.deleteMarkers=function(){e.clearMarkers(),e.new_marker=[]},e.handleLocationError=function(e,o,t){o.setPosition(t),o.setContent(e?"Error: El servicio de Geolocalizacion FallÃ³.":"Error: Your browser doesn't support geolocation.")},e.createMarker=function(o){if(void 0!=e.data_load)for(var t=0;t<e.data_load.length;t++){var a=e.data_load[t],n={lat:parseFloat(a.lat),lng:parseFloat(a.lng)};if(1===a.id_services)var i={url:"//localhost:3000/assets/app/images/banco-color.svg",scaledSize:new google.maps.Size(20,20),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(0,0),scale:1};else if(2===a.id_services)var i={url:"//localhost:3000/assets/app/images/comisaria-color.svg",scaledSize:new google.maps.Size(20,20),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(0,0),scale:1};else if(3===a.id_services)var i={url:"//localhost:3000/assets/app/images/hospital-color.svg",scaledSize:new google.maps.Size(20,20),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(0,0),scale:1};else if(4===a.id_services)var i={url:"//localhost:3000/assets/app/images/bomberos-color.svg",scaledSize:new google.maps.Size(20,20),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(0,0),scale:1};else console.log("Ocurrio un error inesperado en los ID "+a.id_services+" de Entidades");var r=new google.maps.Marker({position:n,map:o,animation:google.maps.Animation.DROP,draggable:!1,icon:i,type:a.id_services,foto:a.foto,nombre_empresa:a.nombre_empresa,direccion:a.direccion});e.new_marker.push(r),google.maps.event.addListener(r,"click",function(){e.openInfoWindow(this)})}else alert("Ocurrio un error al cargar");s.close()},e.markers_hover=function(o,t,a,n,i,l){var c={};c.lat=parseFloat(o),c.lng=parseFloat(t),s.close(),s=new google.maps.InfoWindow({map:r,maxWidth:200}),s.setPosition(c),s.setContent(['<div class="center globo_ubicacion">','<img width="100%" src="'+a+'">',"<h6>"+n+"</h6>","<p>"+i+"</p>","</div>"].join("")),e.set_google_maps()},e.openInfoWindow=function(o){s.close(),s=new google.maps.InfoWindow({map:r,maxWidth:200});var t=o.position;s.setPosition(t),s.setContent(['<div class="center globo_ubicacion">','<img width="100%" src="'+o.foto+'">',"<h6>"+o.nombre_empresa+"</h6>","<p>"+o.direccion+"</p>","</div>"].join("")),e.set_google_maps()},e.set_google_maps=function(){var e=$(".gm-style-iw"),o=e.next(),t=e.prev();t.children(":nth-child(2)").css({display:"none"}),t.children(":nth-child(4)").css({display:"none"}),e.parent().parent().css({left:"40px"}),t.children(":nth-child(1)").attr("style",function(e,o){return o+"left: 84px !important;"}),t.children(":nth-child(3)").attr("style",function(e,o){return o+"left: 84px !important;"}),t.children(":nth-child(3)").find("div").children().css({"box-shadow":"rgba(0, 0, 0, 0) 0px 1px 6px","z-index":"1"}),t.children(":nth-child(3)").children(":nth-child(1)").find("div").attr("style",function(e,o){return o+"height: 21px !important;width: 10px !important;left:7px !important;"}),t.children(":nth-child(3)").children(":nth-child(2)").find("div").attr("style",function(e,o){return o+"height: 25px !important;width: 9px !important;"}),o.css({display:"none"})},e.show_marker=function(o){e.mapa="detalle",e.hide_search=!0,e.boton_search_global=!1;var t={};t.lat=parseFloat(o.lat),t.lng=parseFloat(o.lng),console.log(t),e.show_detalle=!0,e.detalle=o,e.show_panel=!1;new google.maps.Marker({position:t,map:r,animation:google.maps.Animation.DROP,draggable:!1,type:o.id_services,foto:o.foto,nombre_empresa:o.nombre_empresa,direccion:o.direccion});window.setTimeout(function(){google.maps.event.trigger(r,"resize")},800),r.setZoom(17),r.panTo(t)},e.search_global=function(o){e.mapa="detalle",e.hide_search=!0,e.show_detalle=!1,e.show_panel=!0,e.boton_search_global=!1,e.load(o,10,1),e.createMarker(r)},e.return=function(){e.mapa="full",e.show_detalle=!1,e.show_panel=!0,e.hide_search=!1,e.boton_search_global=!0,window.setTimeout(function(){google.maps.event.trigger(r,"resize")},500)},e.como_llegar=function(o,t){e.show_detalle=!1,e.show_panel=!1,e.hide_search=!0,e.boton_search_global=!1;var a="https://maps.googleapis.com/maps/api/geocode/json?latlng="+o+","+t+"&sensor=false";console.log(a),e.header_search=!1,$.getJSON(a).done(function(o){console.log(o.results[0].formatted_address),e.input_end=o.results[0].formatted_address,e.$digest()})},e.show_detalle_indicaciones=function(){e.detalle_distancia=!0},e.close_indicacion=function(){l.setMap(null),e.mapa="full",e.input_end="",e.input_start="",e.header_search=!0,e.hide_search=!1,e.indicacion_detalle=!1,e.boton_search_global=!0,e.show_detalle=!1,e.show_panel=!0,window.setTimeout(function(){google.maps.event.trigger(r,"resize")},500)}}]),e.directive("tooltip",function(){return{restrict:"A",link:function(e,o,t){$(o).hover(function(){$(o).tooltip("show")},function(){$(o).tooltip("hide")})}}})}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFuZ3VsYXIvVWJpY2FjaW9uZXNfRnJvbnQvQ3RybC5qcyJdLCJuYW1lcyI6WyJtb2RlbCIsImFuZ3VsYXIiLCJtb2R1bGUiLCJjb250cm9sbGVyIiwiJHNjb3BlIiwiJGh0dHAiLCIkdGltZW91dCIsIlNlcnZpY2VzIiwiY2xvc2VJbmZvV2luZG93IiwiaW5mb1dpbmRvdyIsImNsb3NlIiwidGVtcCIsIm5ld19tYXJrZXIiLCJkYXRhX3JlYWwiLCJjYW50X3Jvd3MiLCJtYXBhIiwiaGVhZGVyX3NlYXJjaCIsImxvYWQiLCJxIiwicCIsInBhZ2UiLCJ1bmRlZmluZWQiLCJMb2FkIiwidGhlbiIsInJlc3BvbnNlIiwiZGF0YV9sb2FkIiwiZGF0YSIsInRvIiwidG90YWwiLCJsYXN0X3BhZ2UiLCJjdXJyZW50X3BhZ2UiLCJuZXh0X3BhZ2VfdXJsIiwicHJldl9wYWdlX3VybCIsInJlcGxhY2UiLCJsb2FkX3NlcnZpY2VzIiwiTG9hZF9TZXJ2aWNlcyIsImRhdGFfbG9hZF9zZXJ2aWNlcyIsImluaXQiLCJzaG93X3BhbmVsIiwic2hvd19kZXRhbGxlIiwiZGlzYWJsZV9idXR0b24iLCJtYXAiLCJnb29nbGUiLCJtYXBzIiwiSW5mb1dpbmRvdyIsImRpcmVjdGlvbnNEaXNwbGF5IiwiZGlyZWN0aW9uc1NlcnZpY2UiLCJzdHlsZSIsImZlYXR1cmVUeXBlIiwiZWxlbWVudFR5cGUiLCJzdHlsZXJzIiwidmlzaWJpbGl0eSIsImh1ZSIsIk1hcCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJjZW50ZXIiLCJsYXQiLCJsbmciLCJ6b29tIiwic3R5bGVzIiwiZXZlbnQiLCJhZGRMaXN0ZW5lciIsIkRpcmVjdGlvbnNSZW5kZXJlciIsIkRpcmVjdGlvbnNTZXJ2aWNlIiwiaW5pdE1hcCIsInNlYXJjaF9lbnRpZGFkIiwicmVzaXplIiwiYWRkTGlzdGVuZXJPbmNlIiwidHJpZ2dlciIsImdldEJvdW5kcyIsImdldEtpbG9tZXRyb3MiLCJsYXQxIiwibG9uMSIsImxhdDIiLCJsb24yIiwicmFkIiwieCIsIk1hdGgiLCJQSSIsImRMYXQiLCJkTG9uZyIsImEiLCJzaW4iLCJjb3MiLCJhdGFuMiIsInNxcnQiLCJ0b0ZpeGVkIiwibG9jYXRpb24iLCJuYXZpZ2F0b3IiLCJnZW9sb2NhdGlvbiIsImdldEN1cnJlbnRQb3NpdGlvbiIsInBvc2l0aW9uIiwicG9zaWNpb25fYWN0dWFsIiwiY29vcmRzIiwibGF0aXR1ZGUiLCJsb25naXR1ZGUiLCJnZW9jb2RpbmciLCJpbWFnZSIsInVybCIsInNpemUiLCJTaXplIiwib3JpZ2luIiwiUG9pbnQiLCJhbmNob3IiLCJtYXJrZXIiLCJNYXJrZXIiLCJpY29uIiwiJCIsImdldEpTT04iLCJkb25lIiwiaW5wdXRfc3RhcnQiLCJyZXN1bHRzIiwiZm9ybWF0dGVkX2FkZHJlc3MiLCIkZGlnZXN0IiwiaW5kaWNhY2lvbmVzIiwic2V0Wm9vbSIsInBhblRvIiwiaGFuZGxlTG9jYXRpb25FcnJvciIsImdldENlbnRlciIsInRvZ2dsZV9NYXJrZXIiLCJpZCIsImNvbnNvbGUiLCJsb2ciLCJjaGVja2VkIiwiaXMiLCJpIiwibGVuZ3RoIiwiaWRfc2VydmljZXMiLCJ2YXJpYWJsZSIsInNob3ciLCJ0eXBlIiwic2V0VmlzaWJsZSIsImhpZGUiLCJqIiwiaW5wdXRfZW5kIiwiYWxlcnQiLCJyZXF1ZXN0IiwiZGVzdGluYXRpb24iLCJ0cmF2ZWxNb2RlIiwiRGlyZWN0aW9uc1RyYXZlbE1vZGUiLCJ1bml0U3lzdGVtIiwiRGlyZWN0aW9uc1VuaXRTeXN0ZW0iLCJwcm92aWRlUm91dGVBbHRlcm5hdGl2ZXMiLCJyb3V0ZSIsInN0YXR1cyIsIkRpcmVjdGlvbnNTdGF0dXMiLCJPSyIsInNldE1hcCIsInNldERpcmVjdGlvbnMiLCJvcmlnZW4iLCJkZXN0aW5vIiwiaW5kaWNhY2lvbl9kZXRhbGxlIiwid2FybmluZyIsInJvdXRlcyIsIndhcm5pbmdzIiwiZGlzdGFuY2lhIiwibGVncyIsImRpc3RhbmNlIiwidGV4dCIsImR1cmFjaW9uIiwiZHVyYXRpb24iLCJydXRhX2dlbmVyYWwiLCJzdW1tYXJ5IiwicnV0YV9kZXRhbGxlIiwic3RlcHMiLCJnb19wb3NpdGlvbiIsInN0YXJ0IiwiZW5kIiwiZGlyZWNjaW9uIiwic2V0UGFuZWwiLCJnZXQiLCJkZWwiLCJpbmRleCIsInNwbGljZSIsImRlbF90ZW1wIiwic2V0TWFwT25BbGwiLCJjbGVhck1hcmtlcnMiLCJkZWxldGVNYXJrZXJzIiwiYnJvd3Nlckhhc0dlb2xvY2F0aW9uIiwicG9zIiwic2V0UG9zaXRpb24iLCJzZXRDb250ZW50IiwiY3JlYXRlTWFya2VyIiwiZGF0YV90ZW1wIiwicGFyc2VGbG9hdCIsInNjYWxlZFNpemUiLCJzY2FsZSIsImFuaW1hdGlvbiIsIkFuaW1hdGlvbiIsIkRST1AiLCJkcmFnZ2FibGUiLCJmb3RvIiwibm9tYnJlX2VtcHJlc2EiLCJwdXNoIiwib3BlbkluZm9XaW5kb3ciLCJ0aGlzIiwibWFya2Vyc19ob3ZlciIsInRpdHVsbyIsIm1heFdpZHRoIiwiam9pbiIsInNldF9nb29nbGVfbWFwcyIsIml3T3V0ZXIiLCJpd0Nsb3NlQnRuIiwibmV4dCIsIml3QmFja2dyb3VuZCIsInByZXYiLCJjaGlsZHJlbiIsImNzcyIsImRpc3BsYXkiLCJwYXJlbnQiLCJsZWZ0IiwiYXR0ciIsInMiLCJmaW5kIiwiYm94LXNoYWRvdyIsInotaW5kZXgiLCJzaG93X21hcmtlciIsImhpZGVfc2VhcmNoIiwiYm90b25fc2VhcmNoX2dsb2JhbCIsImRldGFsbGUiLCJ3aW5kb3ciLCJzZXRUaW1lb3V0Iiwic2VhcmNoX2dsb2JhbCIsInNlYXJjaCIsInJldHVybiIsImNvbW9fbGxlZ2FyIiwic2hvd19kZXRhbGxlX2luZGljYWNpb25lcyIsImRldGFsbGVfZGlzdGFuY2lhIiwiY2xvc2VfaW5kaWNhY2lvbiIsImRpcmVjdGl2ZSIsInJlc3RyaWN0IiwibGluayIsInNjb3BlIiwiZWxlbWVudCIsImF0dHJzIiwiaG92ZXIiLCJ0b29sdGlwIl0sIm1hcHBpbmdzIjoiQ0FBQSxXQUNB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LFdBRWJoSSxFQUFFOEgsR0FBU0csUUFBUSxTQUNwQixXQUVDakksRUFBRThILEdBQVNHLFFBQVEiLCJmaWxlIjoiYW5ndWxhci9VYmljYWNpb25lc19Gcm9udC9DdHJsLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uICgpIHtcbid1c2Ugc3RyaWN0JztcbnZhciBtb2RlbCA9IGFuZ3VsYXIubW9kdWxlKCdtb2RlbCcsIFxuICAgIFsnU2VydmljZXMnLFwibmdTYW5pdGl6ZVwiXSk7XG5cbnZhciBzZWxldGVkVmFsdWUgPSAxNTtcblxubW9kZWwuY29udHJvbGxlcignQ3RybCcsIFxuICAgIFsnJHNjb3BlJyxcbiAgICAnJGh0dHAnLFxuICAgICckdGltZW91dCcsXG4gICAgJ1NlcnZpY2VzJywgIFxuICAgIGZ1bmN0aW9uKFxuICAgICAgICAkc2NvcGUsXG4gICAgICAgICRodHRwLFxuICAgICAgICAkdGltZW91dCxcbiAgICAgICAgU2VydmljZXMpXG57ICBcbiAgICB2YXIgaHRtbCA9IGZ1bmN0aW9uKGlkKSB7IFxuICAgICAgICByZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpOyBcbiAgICB9O1xuXG4gICAgJHNjb3BlLnRlbXAgPSBbXTtcbiAgICAkc2NvcGUubmV3X21hcmtlciA9IFtdO1xuICAgICRzY29wZS5kYXRhX3JlYWwgPSBbXTtcbiAgICAkc2NvcGUuY2FudF9yb3dzID0gXCIxMFwiO1xuICAgICRzY29wZS5tYXBhID0gJ2Z1bGwnO1xuICAgICRzY29wZS5oZWFkZXJfc2VhcmNoID0gdHJ1ZTtcbiAgICBcbiAgICAkc2NvcGUubG9hZCA9IGZ1bmN0aW9uKHEscCxwYWdlKXtcbiAgICAgICAgaWYocSA9PSB1bmRlZmluZWQpeyBcbiAgICAgICAgICAgIHEgPSBcIlwiO1xuICAgICAgICB9ICAgXG4gICAgICAgIFNlcnZpY2VzLkxvYWQocSxwLHBhZ2UpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAkc2NvcGUuZGF0YV9sb2FkID0gcmVzcG9uc2UuZGF0YTsgXG4gICAgICAgICAgICAvLyAkc2NvcGUudGVtcC5wdXNoKCRzY29wZS5kYXRhX2xvYWQpOyAgXG4gICAgICAgICAgICAkc2NvcGUudG8gPSByZXNwb25zZS50bzsgXG4gICAgICAgICAgICAkc2NvcGUudG90YWwgPSByZXNwb25zZS50b3RhbDtcbiAgICAgICAgICAgICRzY29wZS5sYXN0X3BhZ2UgPSByZXNwb25zZS5sYXN0X3BhZ2U7XG4gICAgICAgICAgICAkc2NvcGUuY3VycmVudF9wYWdlID0gcmVzcG9uc2UuY3VycmVudF9wYWdlO1xuICAgICAgICAgICAgJHNjb3BlLm5leHRfcGFnZV91cmwgPSByZXNwb25zZS5uZXh0X3BhZ2VfdXJsO1xuICAgICAgICAgICAgJHNjb3BlLnByZXZfcGFnZV91cmwgPSByZXNwb25zZS5wcmV2X3BhZ2VfdXJsOyBcbiAgICAgICAgICAgIGlmKCRzY29wZS5wcmV2X3BhZ2VfdXJsICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnByZXZfcGFnZV91cmwgPSAkc2NvcGUucHJldl9wYWdlX3VybC5yZXBsYWNlKFwiP3BhZ2U9XCIsXCJcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZigkc2NvcGUubmV4dF9wYWdlX3VybCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICRzY29wZS5uZXh0X3BhZ2VfdXJsID0gJHNjb3BlLm5leHRfcGFnZV91cmwucmVwbGFjZShcIj9wYWdlPVwiLFwiXCIpOyBcbiAgICAgICAgICAgIH0gXG4gICAgICAgIH0sIGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICB9KTsgXG4gICAgfSBcblxuICAgICRzY29wZS5sb2FkX3NlcnZpY2VzID0gZnVuY3Rpb24ocSxwLHBhZ2Upe1xuICAgICAgICBpZihxID09IHVuZGVmaW5lZCl7IFxuICAgICAgICAgICAgcSA9IFwiXCI7XG4gICAgICAgIH0gIFxuICAgICAgICBTZXJ2aWNlcy5Mb2FkX1NlcnZpY2VzKHEscCxwYWdlKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgJHNjb3BlLmRhdGFfbG9hZF9zZXJ2aWNlcyA9IHJlc3BvbnNlLmRhdGE7XG4gICAgICAgICAgICAkc2NvcGUudG8gPSByZXNwb25zZS50bzsgXG4gICAgICAgICAgICAkc2NvcGUudG90YWwgPSByZXNwb25zZS50b3RhbDtcbiAgICAgICAgICAgICRzY29wZS5sYXN0X3BhZ2UgPSByZXNwb25zZS5sYXN0X3BhZ2U7XG4gICAgICAgICAgICAkc2NvcGUuY3VycmVudF9wYWdlID0gcmVzcG9uc2UuY3VycmVudF9wYWdlO1xuICAgICAgICAgICAgJHNjb3BlLm5leHRfcGFnZV91cmwgPSByZXNwb25zZS5uZXh0X3BhZ2VfdXJsO1xuICAgICAgICAgICAgJHNjb3BlLnByZXZfcGFnZV91cmwgPSByZXNwb25zZS5wcmV2X3BhZ2VfdXJsOyBcbiAgICAgICAgICAgIGlmKCRzY29wZS5wcmV2X3BhZ2VfdXJsICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnByZXZfcGFnZV91cmwgPSAkc2NvcGUucHJldl9wYWdlX3VybC5yZXBsYWNlKFwiP3BhZ2U9XCIsXCJcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZigkc2NvcGUubmV4dF9wYWdlX3VybCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICRzY29wZS5uZXh0X3BhZ2VfdXJsID0gJHNjb3BlLm5leHRfcGFnZV91cmwucmVwbGFjZShcIj9wYWdlPVwiLFwiXCIpOyBcbiAgICAgICAgICAgIH0gIFxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJHNjb3BlLmRhdGFfbG9hZF9zZXJ2aWNlcyk7XG4gICAgICAgIH0sIGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICB9KTsgXG4gICAgfTtcblxuICAgICRzY29wZS5sb2FkX3NlcnZpY2VzKCcnLDEwLDEpO1xuXG5cbiAgICBcbiAgICBcbiAgICAkc2NvcGUuaW5pdCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICRzY29wZS5sb2FkKCcnLDIwMCwxKTtcbiAgICB9ICAgXG5cbiAgICAkc2NvcGUuc2hvd19wYW5lbCA9IHRydWU7XG4gICAgJHNjb3BlLnNob3dfZGV0YWxsZSA9IGZhbHNlO1xuICAgICRzY29wZS5kaXNhYmxlX2J1dHRvbiA9IGZhbHNlO1xuICAgIHZhciBtYXAsbWFwMixtYXJrZXI7XG4gICAgdmFyIGluZm9XaW5kb3cgPSBudWxsO1xuICAgIGluZm9XaW5kb3cgPSBuZXcgZ29vZ2xlLm1hcHMuSW5mb1dpbmRvdygpOyBcbiAgICBcbiAgICB2YXIgZGlyZWN0aW9uc0Rpc3BsYXkgPSBudWxsO1xuICAgIHZhciBkaXJlY3Rpb25zU2VydmljZSA9IG51bGw7IFxuICAgIC8vIHZhciBzdHlsZSA9IFt7XCJmZWF0dXJlVHlwZVwiOlwiYWRtaW5pc3RyYXRpdmVcIixcImVsZW1lbnRUeXBlXCI6XCJsYWJlbHMudGV4dC5maWxsXCIsXCJzdHlsZXJzXCI6W3tcImNvbG9yXCI6XCIjMzE0NjZhXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcImxhbmRzY2FwZVwiLFwiZWxlbWVudFR5cGVcIjpcImFsbFwiLFwic3R5bGVyc1wiOlt7XCJzYXR1cmF0aW9uXCI6XCItMTNcIn0se1wibGlnaHRuZXNzXCI6XCI2XCJ9LHtcImdhbW1hXCI6XCIxLjgxXCJ9LHtcImNvbG9yXCI6XCIjYzljY2QxXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcImxhbmRzY2FwZVwiLFwiZWxlbWVudFR5cGVcIjpcImxhYmVsc1wiLFwic3R5bGVyc1wiOlt7XCJ3ZWlnaHRcIjpcIjEuODJcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwibGFuZHNjYXBlXCIsXCJlbGVtZW50VHlwZVwiOlwibGFiZWxzLnRleHRcIixcInN0eWxlcnNcIjpbe1widmlzaWJpbGl0eVwiOlwib25cIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwibGFuZHNjYXBlXCIsXCJlbGVtZW50VHlwZVwiOlwibGFiZWxzLnRleHQuZmlsbFwiLFwic3R5bGVyc1wiOlt7XCJsaWdodG5lc3NcIjpcIjNcIn0se1wiZ2FtbWFcIjpcIjAuMDBcIn0se1wic2F0dXJhdGlvblwiOlwiLTFcIn0se1wid2VpZ2h0XCI6XCIyLjMwXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInBvaVwiLFwiZWxlbWVudFR5cGVcIjpcImFsbFwiLFwic3R5bGVyc1wiOlt7XCJ2aXNpYmlsaXR5XCI6XCJvZmZcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicm9hZFwiLFwiZWxlbWVudFR5cGVcIjpcImFsbFwiLFwic3R5bGVyc1wiOlt7XCJzYXR1cmF0aW9uXCI6LTEwMH0se1wibGlnaHRuZXNzXCI6NDV9LHtcInZpc2liaWxpdHlcIjpcIm9uXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInJvYWQuaGlnaHdheVwiLFwiZWxlbWVudFR5cGVcIjpcImFsbFwiLFwic3R5bGVyc1wiOlt7XCJ2aXNpYmlsaXR5XCI6XCJzaW1wbGlmaWVkXCJ9LHtcInNhdHVyYXRpb25cIjpcIi0xMDBcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicm9hZC5hcnRlcmlhbFwiLFwiZWxlbWVudFR5cGVcIjpcImxhYmVscy5pY29uXCIsXCJzdHlsZXJzXCI6W3tcInZpc2liaWxpdHlcIjpcIm9mZlwifSx7XCJzYXR1cmF0aW9uXCI6XCItMTAwXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInRyYW5zaXRcIixcImVsZW1lbnRUeXBlXCI6XCJhbGxcIixcInN0eWxlcnNcIjpbe1widmlzaWJpbGl0eVwiOlwib25cIn0se1wic2F0dXJhdGlvblwiOlwiLTEwMFwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJ3YXRlclwiLFwiZWxlbWVudFR5cGVcIjpcImFsbFwiLFwic3R5bGVyc1wiOlt7XCJjb2xvclwiOlwiIzUzNzVhY1wifSx7XCJ2aXNpYmlsaXR5XCI6XCJvblwifV19XTtcbiAgICB2YXIgc3R5bGUgPSBbXG4gICAgICAgIHtcbiAgICAgICAgICAgIFwiZmVhdHVyZVR5cGVcIjogXCJhZG1pbmlzdHJhdGl2ZS5jb3VudHJ5XCIsXG4gICAgICAgICAgICBcImVsZW1lbnRUeXBlXCI6IFwiZ2VvbWV0cnlcIixcbiAgICAgICAgICAgIFwic3R5bGVyc1wiOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBcInZpc2liaWxpdHlcIjogXCJzaW1wbGlmaWVkXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgXCJodWVcIjogXCIjZmYwMDAwXCJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBdXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIFwiZmVhdHVyZVR5cGVcIjogXCJwb2lcIixcbiAgICAgICAgICAgIFwiZWxlbWVudFR5cGVcIjogXCJhbGxcIixcbiAgICAgICAgICAgIFwic3R5bGVyc1wiOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBcInZpc2liaWxpdHlcIjogXCJvZmZcIlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF1cbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgXCJmZWF0dXJlVHlwZVwiOiBcInBvaS5hdHRyYWN0aW9uXCIsXG4gICAgICAgICAgICBcImVsZW1lbnRUeXBlXCI6IFwiYWxsXCIsXG4gICAgICAgICAgICBcInN0eWxlcnNcIjogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgXCJ2aXNpYmlsaXR5XCI6IFwib2ZmXCJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBdXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIFwiZmVhdHVyZVR5cGVcIjogXCJwb2kuYnVzaW5lc3NcIixcbiAgICAgICAgICAgIFwiZWxlbWVudFR5cGVcIjogXCJhbGxcIixcbiAgICAgICAgICAgIFwic3R5bGVyc1wiOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBcInZpc2liaWxpdHlcIjogXCJvZmZcIlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF1cbiAgICAgICAgfVxuICAgIF07XG5cbiAgICBmdW5jdGlvbiBjbG9zZUluZm9XaW5kb3coKXtcbiAgICAgICAgLy8gaW5mb1dpbmRvdyA9IG5ldyBnb29nbGUubWFwcy5JbmZvV2luZG93KCk7IFxuICAgICAgICBpbmZvV2luZG93LmNsb3NlKCk7XG4gICAgfSBcbiAgICBcbiAgICAkc2NvcGUuTWFwID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIG1hcCA9IG5ldyBnb29nbGUubWFwcy5NYXAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hcGEnKSwge1xuICAgICAgICAgICAgY2VudGVyOiB7bGF0OiAtMTIuMDQ2NjI5LCBsbmc6IC03Ny4wMjE0MzM3fSxcbiAgICAgICAgICAgIHpvb206IDExLFxuICAgICAgICAgICAgc3R5bGVzIDogc3R5bGVcbiAgICAgICAgfSk7XG4gICAgICAgIC8qIHBlcm1pdGUgb2N1bHRhciBlbCBpbmZvd2luZG93ICovXG4gICAgICAgIGluZm9XaW5kb3cgPSBuZXcgZ29vZ2xlLm1hcHMuSW5mb1dpbmRvdygpOyBcbiAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIobWFwLCAnY2xpY2snLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgY2xvc2VJbmZvV2luZG93KCk7XG4gICAgICAgIH0pO1xuXG5cblxuICAgICAgICBkaXJlY3Rpb25zRGlzcGxheSA9IG5ldyBnb29nbGUubWFwcy5EaXJlY3Rpb25zUmVuZGVyZXIoKTtcbiAgICAgICAgZGlyZWN0aW9uc1NlcnZpY2UgPSBuZXcgZ29vZ2xlLm1hcHMuRGlyZWN0aW9uc1NlcnZpY2UoKTtcbiAgICAgICAgXG4gICAgfVxuICAgICRzY29wZS5NYXAoKTsgXG5cblxuICAgICRzY29wZS5pbml0TWFwID0gZnVuY3Rpb24oKSB7IFxuICAgICAgICAvLyAkc2NvcGUuJHdhdGNoKCdzZWFyY2hfZW50aWRhZCcsIGZ1bmN0aW9uKG4peyBcbiAgICAgICAgICAgIGlmKCRzY29wZS5zZWFyY2hfZW50aWRhZCAhPSB1bmRlZmluZWQgJiYgJHNjb3BlLnNlYXJjaF9lbnRpZGFkICE9ICcnKXtcbiAgICAgICAgICAgICAgICAkc2NvcGUubG9hZCgkc2NvcGUuc2VhcmNoX2VudGlkYWQsNSwxKTtcbiAgICAgICAgICAgICAgICAvLyAkc2NvcGUubWFwYSA9ICdkZXRhbGxlJzsgXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICAgICRzY29wZS5sb2FkKCcnLCcwJywxKTsgXG4gICAgICAgICAgICAgICAgLy8gJHNjb3BlLm1hcGEgPSAnZnVsbCc7IFxuICAgICAgICAgICAgfVxuICAgICAgICAvLyB9KTsgICAgICAgICAgIFxuICAgIH1cbiAgICAkc2NvcGUuaW5pdE1hcCgpO1xuXG4gICAgJHNjb3BlLnJlc2l6ZSA9IGZ1bmN0aW9uKG1hcCl7XG4gICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyT25jZShtYXAsICdib3VuZHNfY2hhbmdlZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQudHJpZ2dlcihtYXAsICdyZXNpemUnKTtcbiAgICAgICAgICAgdmFyIGJvdW5kcyA9IG1hcC5nZXRCb3VuZHMoKTtcbiAgICAgICAgfSk7XG4gICAgfTsgXG5cbiAgICAkc2NvcGUuZ2V0S2lsb21ldHJvcyA9IGZ1bmN0aW9uKGxhdDEsbG9uMSxsYXQyLGxvbjIpe1xuICAgICAgICBmdW5jdGlvbiByYWQoeCkge1xuICAgICAgICAgICAgcmV0dXJuIHggKiBNYXRoLlBJLzE4MDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgUiA9IDYzNzguMTM3OyAvL1JhZGlvIGRlIGxhIHRpZXJyYSBlbiBrbVxuICAgICAgICB2YXIgZExhdCA9IHJhZCggbGF0MiAtIGxhdDEgKTtcbiAgICAgICAgdmFyIGRMb25nID0gcmFkKCBsb24yIC0gbG9uMSApO1xuICAgICAgICB2YXIgYSA9IE1hdGguc2luKGRMYXQvMikgKiBNYXRoLnNpbihkTGF0LzIpICsgTWF0aC5jb3MocmFkKGxhdDEpKSAqIE1hdGguY29zKHJhZChsYXQyKSkgKiBNYXRoLnNpbihkTG9uZy8yKSAqIE1hdGguc2luKGRMb25nLzIpO1xuICAgICAgICB2YXIgYyA9IDIgKiBNYXRoLmF0YW4yKE1hdGguc3FydChhKSwgTWF0aC5zcXJ0KDEtYSkpO1xuICAgICAgICB2YXIgZCA9IFIgKiBjO1xuICAgICAgICB2YXIgcmVzdWx0ID0gZC50b0ZpeGVkKDMpOyBcbiAgICAgICAgcmV0dXJuIHJlc3VsdDsgLy9SZXRvcm5hIHRyZXMgZGVjaW1hbGVzXG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIGdldE1pbkZyb21BcnJheSAoYXJyYXlfb2ZfdmFsdWVzKSB7XG4gICAgICAgIHZhciBtaW4gPSBNYXRoLm1pbi5hcHBseShudWxsLCBhcnJheV9vZl92YWx1ZXMpO1xuICAgICAgICByZXR1cm4gbWluOyAgIFxuICAgIH07XG5cbiAgICAvLyBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lcihtYXJrZXIsICdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgLy8gICAgIGFsZXJ0KFwiY2xpY2tlZCBtYXJrZXJcIik7XG4gICAgLy8gfSk7XG5cbiAgICBcbiAgICAvLyAkc2NvcGUubG9jYXRpb24gPSBmdW5jdGlvbigpeyAgXG4gICAgICAgIC8vICAgICBpZiAobmF2aWdhdG9yLmdlb2xvY2F0aW9uKSB7XG4gICAgICAgIC8vICAgICAgICAgLy8gSU5JVCBSRVNJWkUgXG4gICAgICAgIC8vICAgICAgICAgJHNjb3BlLm1hcGEgPSAnZGV0YWxsZSc7IFxuICAgICAgICAvLyAgICAgICAgICRzY29wZS5kaXNhYmxlX2J1dHRvbiA9IHRydWU7IFxuICAgICAgICAvLyAgICAgICAgICRzY29wZS5kYXRhID0gW107XG5cbiAgICAgICAgLy8gICAgICAgICAkc2NvcGUuaW5pdE1hcCgpOyBcbiAgICAgICAgLy8gICAgICAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LnRyaWdnZXIobWFwLCAncmVzaXplJyk7XG4gICAgICAgIC8vICAgICAgICAgfSw1MDApO1xuICAgICAgICAvLyAgICAgICAgIG5hdmlnYXRvci5nZW9sb2NhdGlvbi5nZXRDdXJyZW50UG9zaXRpb24oZnVuY3Rpb24ocG9zaXRpb24pIHsgICAgXG4gICAgICAgIC8vICAgICAgICAgICAgICRzY29wZS5jcmVhdGVNYXJrZXIobWFwKTtcbiAgICAgICAgLy8gICAgICAgICAgICAgJHNjb3BlLnBvc2ljaW9uX2FjdHVhbCA9IHtcbiAgICAgICAgLy8gICAgICAgICAgICAgICBsYXQ6IHBvc2l0aW9uLmNvb3Jkcy5sYXRpdHVkZSxcbiAgICAgICAgLy8gICAgICAgICAgICAgICBsbmc6IHBvc2l0aW9uLmNvb3Jkcy5sb25naXR1ZGVcbiAgICAgICAgLy8gICAgICAgICAgICAgfTsgXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAvLyAgICAgICAgICAgICB2YXIgZ2VvY29kaW5nID0gJ2h0dHBzOi8vbWFwcy5nb29nbGVhcGlzLmNvbS9tYXBzL2FwaS9nZW9jb2RlL2pzb24/bGF0bG5nPScgKyAkc2NvcGUucG9zaWNpb25fYWN0dWFsLmxhdCArICcsJyArICRzY29wZS5wb3NpY2lvbl9hY3R1YWwubG5nICsgJyZzZW5zb3I9ZmFsc2UnO1xuICAgICAgICAvLyAgICAgICAgICAgICBjb25zb2xlLmxvZyhnZW9jb2RpbmcpO1xuXG4gICAgICAgIC8vICAgICAgICAgICAgIHZhciBpbWFnZSA9IHtcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIHVybDogJy9hc3NldHMvYXBwL2ltYWdlcy9wb3NpdGlvbl9hY3R1YWwucG5nJywgXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICBzaXplOiBuZXcgZ29vZ2xlLm1hcHMuU2l6ZSg1MCwgNTApLCBcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIG9yaWdpbjogbmV3IGdvb2dsZS5tYXBzLlBvaW50KDAsIDApLCBcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIGFuY2hvcjogbmV3IGdvb2dsZS5tYXBzLlBvaW50KDAsIDQwKVxuICAgICAgICAvLyAgICAgICAgICAgICB9OyBcbiAgICAgICAgLy8gICAgICAgICAgICAgdmFyIG1hcmtlciA9IG5ldyBnb29nbGUubWFwcy5NYXJrZXIoe1xuICAgICAgICAvLyAgICAgICAgICAgICAgICAgcG9zaXRpb246ICRzY29wZS5wb3NpY2lvbl9hY3R1YWwsXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICBtYXA6IG1hcCxcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIGljb246IGltYWdlXG4gICAgICAgIC8vICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIC8vICAgICAgICAgICAgIHZhciBjaXJjbGUgPSBuZXcgZ29vZ2xlLm1hcHMuQ2lyY2xlKHtcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIGNlbnRlcjogJHNjb3BlLnBvc2ljaW9uX2FjdHVhbCxcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIHJhZGl1czogMTAwMCxcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIG1hcDogbWFwLFxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgZmlsbENvbG9yOiAnIzM5NTI3YicsXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICBmaWxsT3BhY2l0eTogMCxcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIHN0cm9rZUNvbG9yOiAnIzM5NTI3YicsXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICBzdHJva2VPcGFjaXR5OiAwLjJcbiAgICAgICAgLy8gICAgICAgICAgICAgfSk7ICAgXG4gICAgICAgIC8vICAgICAgICAgICAgICQuZ2V0SlNPTihnZW9jb2RpbmcpLmRvbmUoZnVuY3Rpb24obG9jYXRpb24pIHtcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGxvY2F0aW9uLnJlc3VsdHNbMF0uZm9ybWF0dGVkX2FkZHJlc3MpO1xuICAgICAgICAvLyAgICAgICAgICAgICAgICAgLy8gJHNjb3BlLnNlYXJjaF9lbnRpZGFkID0gbG9jYXRpb24ucmVzdWx0c1swXS5mb3JtYXR0ZWRfYWRkcmVzcztcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIC8vICRzY29wZS4kZGlnZXN0KCk7XG4gICAgICAgIC8vICAgICAgICAgICAgIH0pO1xuICAgICAgICAvLyAgICAgICAgICAgICBmb3IgKHZhciBpID0gJHNjb3BlLmRhdGFfbG9hZC5sZW5ndGg7IGktLTspeyBcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIGlmKHBhcnNlRmxvYXQoICRzY29wZS5nZXRLaWxvbWV0cm9zKCAkc2NvcGUucG9zaWNpb25fYWN0dWFsLmxhdCwgJHNjb3BlLnBvc2ljaW9uX2FjdHVhbC5sbmcsICRzY29wZS5kYXRhX2xvYWRbaV0ubGF0LCAkc2NvcGUuZGF0YV9sb2FkW2ldLmxuZykpIDw9IDEpeyAgIFxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICRzY29wZS5kYXRhX3JlYWwucHVzaCgkc2NvcGUuZGF0YV9sb2FkW2ldKTtcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygkc2NvcGUuZGF0YV9yZWFsKTtcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAkc2NvcGUuJGRpZ2VzdCgpO1xuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIC8vIHZhciBtaW4gPSBNYXRoLm1pbi5hcHBseShudWxsLCBhcnJheSk7XG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coaSArJyBlbCBtaW5pbW8gZXM6ICcrIG1pbik7XG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2cocmVzdWx0KTtcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygkc2NvcGUuZGF0YV9sb2FkW2ldKTtcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAvLyBpZihpID09IDApe1xuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygkc2NvcGUuZGF0YV9sb2FkW2ldKTtcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgLy8gJC5nZXRKU09OKGdlb2NvZGluZykuZG9uZShmdW5jdGlvbihsb2NhdGlvbikge1xuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2cobG9jYXRpb24ucmVzdWx0c1swXS5mb3JtYXR0ZWRfYWRkcmVzcyk7XG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICB2YXIgc3RhcnQgPSBsb2NhdGlvbi5yZXN1bHRzWzBdLmZvcm1hdHRlZF9hZGRyZXNzO1xuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgdmFyIGVuZCA9ICRzY29wZS5kYXRhX2xvYWRbM10uZGlyZWNjaW9uO1xuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgaWYoIXN0YXJ0IHx8ICFlbmQpe1xuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgIGFsZXJ0KFwiU3RhcnQgYW5kIEVuZCBhZGRyZXNzZXMgYXJlIHJlcXVpcmVkXCIpO1xuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgIHJldHVybjtcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIH1cbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIHZhciByZXF1ZXN0ID0ge1xuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICBvcmlnaW46IHN0YXJ0LFxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICBkZXN0aW5hdGlvbjogZW5kLFxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICB0cmF2ZWxNb2RlOiBnb29nbGUubWFwcy5EaXJlY3Rpb25zVHJhdmVsTW9kZVsnV0FMS0lORyddLFxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICB1bml0U3lzdGVtOiBnb29nbGUubWFwcy5EaXJlY3Rpb25zVW5pdFN5c3RlbVsnTUVUUklDJ10sXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIHByb3ZpZGVSb3V0ZUFsdGVybmF0aXZlczogZmFsc2VcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIH07XG5cbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIGRpcmVjdGlvbnNTZXJ2aWNlLnJvdXRlKHJlcXVlc3QsIGZ1bmN0aW9uKHJlc3BvbnNlLCBzdGF0dXMpIHtcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICBpZiAoc3RhdHVzID09IGdvb2dsZS5tYXBzLkRpcmVjdGlvbnNTdGF0dXMuT0spIHtcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgZGlyZWN0aW9uc0Rpc3BsYXkuc2V0TWFwKG1hcCk7XG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIGRpcmVjdGlvbnNEaXNwbGF5LnNldFBhbmVsKCQoXCIjZGlyZWN0aW9uc19wYW5lbFwiKS5nZXQoMCkpO1xuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICBkaXJlY3Rpb25zRGlzcGxheS5zZXREaXJlY3Rpb25zKHJlc3BvbnNlKTtcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICB9IGVsc2Uge1xuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSxzdGF0dXMpO1xuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICBhbGVydChcIlRoZXJlIGlzIG5vIGRpcmVjdGlvbnMgYXZhaWxhYmxlIGJldHdlZW4gdGhlc2UgdHdvIHBvaW50c1wiKTtcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICB9XG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICB9KTtcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgLy8gfSlcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICB9IFxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgZWxzZXsgXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRlbCgkc2NvcGUuZGF0YV9sb2FkLmluZGV4T2YoJHNjb3BlLmRhdGFfbG9hZFtpXSkpOyBcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAkc2NvcGUubmV3X21hcmtlcltpXS5zZXRNYXAobnVsbCk7ICBcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAkc2NvcGUuJGRpZ2VzdCgpOyBcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIH0gXG4gICAgICAgIC8vICAgICAgICAgICAgIH0gXG5cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgIC8vICAgICAgICAgICAgIG1hcC5zZXRab29tKDE4KTtcbiAgICAgICAgLy8gICAgICAgICAgICAgbWFwLnBhblRvKG1hcmtlci5wb3NpdGlvbik7XG4gICAgICAgIC8vICAgICAgICAgICAgIG1hcC5maXRCb3VuZHMoY2lyY2xlLmdldEJvdW5kcygpKTtcbiAgICAgICAgLy8gICAgICAgICB9LCBmdW5jdGlvbigpIHsgICBcbiAgICAgICAgLy8gICAgICAgICAgICAgJHNjb3BlLmhhbmRsZUxvY2F0aW9uRXJyb3IodHJ1ZSwgaW5mb1dpbmRvdywgbWFwLmdldENlbnRlcigpKTtcbiAgICAgICAgLy8gICAgICAgICB9KTsgXG4gICAgICAgIC8vICAgICB9IGVsc2UgeyBcbiAgICAgICAgLy8gICAgICAgICAkc2NvcGUuaGFuZGxlTG9jYXRpb25FcnJvcihmYWxzZSwgaW5mb1dpbmRvdywgbWFwLmdldENlbnRlcigpKTtcblxuICAgICAgICAvLyAgICAgfVxuICAgICAgICAgXG4gICAgLy8gfVxuICAgICRzY29wZS5sb2NhdGlvbiA9IGZ1bmN0aW9uKCl7ICBcbiAgICAgICAgaWYgKG5hdmlnYXRvci5nZW9sb2NhdGlvbikgeyBcbiAgICAgICAgICAgIG5hdmlnYXRvci5nZW9sb2NhdGlvbi5nZXRDdXJyZW50UG9zaXRpb24oZnVuY3Rpb24ocG9zaXRpb24pIHsgICAgXG4gICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICRzY29wZS5wb3NpY2lvbl9hY3R1YWwgPSB7XG4gICAgICAgICAgICAgICAgICBsYXQ6IHBvc2l0aW9uLmNvb3Jkcy5sYXRpdHVkZSxcbiAgICAgICAgICAgICAgICAgIGxuZzogcG9zaXRpb24uY29vcmRzLmxvbmdpdHVkZVxuICAgICAgICAgICAgICAgIH07IFxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHZhciBnZW9jb2RpbmcgPSAnaHR0cHM6Ly9tYXBzLmdvb2dsZWFwaXMuY29tL21hcHMvYXBpL2dlb2NvZGUvanNvbj9sYXRsbmc9JyArICRzY29wZS5wb3NpY2lvbl9hY3R1YWwubGF0ICsgJywnICsgJHNjb3BlLnBvc2ljaW9uX2FjdHVhbC5sbmcgKyAnJnNlbnNvcj1mYWxzZSc7IFxuICAgICAgICAgICAgICAgIHZhciBpbWFnZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAnL2Fzc2V0cy9hcHAvaW1hZ2VzL3Bvc2l0aW9uX2FjdHVhbC5wbmcnLCBcbiAgICAgICAgICAgICAgICAgICAgc2l6ZTogbmV3IGdvb2dsZS5tYXBzLlNpemUoNTAsIDUwKSwgXG4gICAgICAgICAgICAgICAgICAgIG9yaWdpbjogbmV3IGdvb2dsZS5tYXBzLlBvaW50KDAsIDApLCBcbiAgICAgICAgICAgICAgICAgICAgYW5jaG9yOiBuZXcgZ29vZ2xlLm1hcHMuUG9pbnQoMCwgNDApXG4gICAgICAgICAgICAgICAgfTsgXG4gICAgICAgICAgICAgICAgdmFyIG1hcmtlciA9IG5ldyBnb29nbGUubWFwcy5NYXJrZXIoe1xuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJHNjb3BlLnBvc2ljaW9uX2FjdHVhbCxcbiAgICAgICAgICAgICAgICAgICAgbWFwOiBtYXAsXG4gICAgICAgICAgICAgICAgICAgIGljb246IGltYWdlXG4gICAgICAgICAgICAgICAgfSk7ICAgXG4gICAgICAgICAgICAgICAgJC5nZXRKU09OKGdlb2NvZGluZykuZG9uZShmdW5jdGlvbihsb2NhdGlvbikgeyBcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmlucHV0X3N0YXJ0ID0gbG9jYXRpb24ucmVzdWx0c1swXS5mb3JtYXR0ZWRfYWRkcmVzczsgIFxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuJGRpZ2VzdCgpO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuaW5kaWNhY2lvbmVzKCk7XG4gICAgICAgICAgICAgICAgfSk7ICBcbiAgICAgICAgICAgICAgICBtYXAuc2V0Wm9vbSgxOCk7XG4gICAgICAgICAgICAgICAgbWFwLnBhblRvKG1hcmtlci5wb3NpdGlvbik7IFxuICAgICAgICAgICAgfSwgZnVuY3Rpb24oKSB7ICAgXG4gICAgICAgICAgICAgICAgJHNjb3BlLmhhbmRsZUxvY2F0aW9uRXJyb3IodHJ1ZSwgaW5mb1dpbmRvdywgbWFwLmdldENlbnRlcigpKTtcbiAgICAgICAgICAgIH0pOyBcbiAgICAgICAgfSBlbHNlIHsgXG4gICAgICAgICAgICAkc2NvcGUuaGFuZGxlTG9jYXRpb25FcnJvcihmYWxzZSwgaW5mb1dpbmRvdywgbWFwLmdldENlbnRlcigpKTtcblxuICAgICAgICB9XG4gICAgICAgICBcbiAgICB9XG4gICAgLyogcGVybWl0ZSBtb3N0cmEgeSBvY3VsdGFyIGxvcyBtYXJjYWRvcmVzIHkgYWN0dWFsaXphciBlbCBsaXN0YWRvICovXG4gICAgJHNjb3BlLnRvZ2dsZV9NYXJrZXIgPSBmdW5jdGlvbihpZCl7IFxuICAgICAgICBjb25zb2xlLmxvZyhcIkluZ3Jlc28gZWwgSUQ6IFwiK2lkKTtcbiAgICAgICAgJHNjb3BlLmlkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpOztcbiAgICAgICAgJHNjb3BlLmlkLmNoZWNrZWQgPSAhJHNjb3BlLmlkLmNoZWNrZWQ7IFxuICAgICAgICBpZigkKCcjJytpZCkuaXMoJzpjaGVja2VkJykpe1xuICAgICAgICAgICAgZm9yKHZhciBpID0gJHNjb3BlLmRhdGFfcmVhbC5sZW5ndGg7IGktLTspeyBcbiAgICAgICAgICAgICAgICBpZigkc2NvcGUuZGF0YV9yZWFsW2ldLmlkX3NlcnZpY2VzID09PSBpZCl7ICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZhcmlhYmxlID0gJyMnKyRzY29wZS5kYXRhX3JlYWxbaV0uaWQrJy0nK2lkO1xuICAgICAgICAgICAgICAgICAgICAkKHZhcmlhYmxlKS5zaG93KCk7XG4gICAgICAgICAgICAgICAgICAgIC8vICRzY29wZS5kZWxfdGVtcCgkc2NvcGUuZGF0YV9yZWFsLmluZGV4T2YoJHNjb3BlLmRhdGFfcmVhbFtpXSkpOyAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIj09PT09PT09PT09PT1cIik7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS5kYXRhX3JlYWxbaV0uaWRfc2VydmljZXMpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIj09PT09PT09PT09PT1cIik7IFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCAkc2NvcGUubmV3X21hcmtlci5sZW5ndGg7IGkrKyl7XG4gICAgICAgICAgICAgICAgaWYoJHNjb3BlLm5ld19tYXJrZXJbaV0udHlwZSA9PT0gaWQpeyBcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm5ld19tYXJrZXJbaV0uc2V0VmlzaWJsZSh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2V7XG4gICAgICAgICAgICBmb3IodmFyIGkgPSAkc2NvcGUuZGF0YV9yZWFsLmxlbmd0aDsgaS0tOyl7IFxuICAgICAgICAgICAgICAgIGlmKCRzY29wZS5kYXRhX3JlYWxbaV0uaWRfc2VydmljZXMgPT09IGlkKXsgXG4gICAgICAgICAgICAgICAgICAgIHZhciB2YXJpYWJsZSA9ICcjJyskc2NvcGUuZGF0YV9yZWFsW2ldLmlkKyctJytpZDtcbiAgICAgICAgICAgICAgICAgICAgJCh2YXJpYWJsZSkuaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICAvLyAkc2NvcGUuZGVsX3RlbXAoJHNjb3BlLmRhdGFfcmVhbC5pbmRleE9mKCRzY29wZS5kYXRhX3JlYWxbaV0pKTsgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCI9PT09PT09PT09PT09XCIpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUuZGF0YV9yZWFsW2ldLmlkX3NlcnZpY2VzKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCI9PT09PT09PT09PT09XCIpOyBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IodmFyIGogPSAwOyBqIDwgJHNjb3BlLm5ld19tYXJrZXIubGVuZ3RoOyBqKyspe1xuICAgICAgICAgICAgICAgIGlmKCRzY29wZS5uZXdfbWFya2VyW2pdLnR5cGUgPT09IGlkKXsgXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5uZXdfbWFya2VyW2pdLnNldFZpc2libGUoZmFsc2UpOyBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCItLSBubyBzZSBlbGltaW5vIC0tOiBcIiskc2NvcGUuZGF0YV9yZWFsW2ldLmlkX3NlcnZpY2VzKTsgICBcbiAgICAgICAgICAgICAgICB9IFxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vICRzY29wZS4kZGlnZXN0KCk7XG4gICAgfVxuXG4gICAgJHNjb3BlLmluZGljYWNpb25lcyA9IGZ1bmN0aW9uKCl7ICAgXG4gICAgICAgIGlmKCEkc2NvcGUuaW5wdXRfc3RhcnQgfHwgISRzY29wZS5pbnB1dF9lbmQpe1xuICAgICAgICAgICAgYWxlcnQoXCJTdGFydCBhbmQgRW5kIGFkZHJlc3NlcyBhcmUgcmVxdWlyZWRcIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHJlcXVlc3QgPSB7XG4gICAgICAgICAgICAgICAgb3JpZ2luOiAkc2NvcGUuaW5wdXRfc3RhcnQsXG4gICAgICAgICAgICAgICAgZGVzdGluYXRpb246ICRzY29wZS5pbnB1dF9lbmQsXG4gICAgICAgICAgICAgICAgdHJhdmVsTW9kZTogZ29vZ2xlLm1hcHMuRGlyZWN0aW9uc1RyYXZlbE1vZGVbJ0RSSVZJTkcnXSxcbiAgICAgICAgICAgICAgICB1bml0U3lzdGVtOiBnb29nbGUubWFwcy5EaXJlY3Rpb25zVW5pdFN5c3RlbVsnTUVUUklDJ10sXG4gICAgICAgICAgICAgICAgcHJvdmlkZVJvdXRlQWx0ZXJuYXRpdmVzOiBmYWxzZVxuICAgICAgICB9O1xuXG4gICAgICAgIGRpcmVjdGlvbnNTZXJ2aWNlLnJvdXRlKHJlcXVlc3QsIGZ1bmN0aW9uKHJlc3BvbnNlLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgPT0gZ29vZ2xlLm1hcHMuRGlyZWN0aW9uc1N0YXR1cy5PSykge1xuICAgICAgICAgICAgICAgIGRpcmVjdGlvbnNEaXNwbGF5LnNldE1hcChtYXApO1xuICAgICAgICAgICAgICAgIC8vIGRpcmVjdGlvbnNEaXNwbGF5LnNldFBhbmVsKCQoXCIjZGlyZWN0aW9uc19wYW5lbFwiKS5nZXQoMCkpO1xuICAgICAgICAgICAgICAgIGRpcmVjdGlvbnNEaXNwbGF5LnNldERpcmVjdGlvbnMocmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICRzY29wZS5vcmlnZW4gPSByZXNwb25zZS5yZXF1ZXN0Lm9yaWdpbjtcbiAgICAgICAgICAgICAgICAkc2NvcGUuZGVzdGlubyA9IHJlc3BvbnNlLnJlcXVlc3QuZGVzdGluYXRpb247XG4gICAgICAgICAgICAgICAgJHNjb3BlLmluZGljYWNpb25fZGV0YWxsZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgJHNjb3BlLndhcm5pbmcgPSByZXNwb25zZS5yb3V0ZXNbMF0ud2FybmluZ3NbMF07XG4gICAgICAgICAgICAgICAgJHNjb3BlLmRpc3RhbmNpYSA9IHJlc3BvbnNlLnJvdXRlc1swXS5sZWdzWzBdLmRpc3RhbmNlLnRleHQ7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmR1cmFjaW9uID0gcmVzcG9uc2Uucm91dGVzWzBdLmxlZ3NbMF0uZHVyYXRpb24udGV4dDtcbiAgICAgICAgICAgICAgICAkc2NvcGUucnV0YV9nZW5lcmFsID0gcmVzcG9uc2Uucm91dGVzWzBdLnN1bW1hcnk7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnJ1dGFfZGV0YWxsZSA9IHJlc3BvbnNlLnJvdXRlc1swXS5sZWdzWzBdLnN0ZXBzO1xuICAgICAgICAgICAgICAgIC8vICRzY29wZS50aXR1bG8gPSAkKCcjZGV0YScpLmh0bWwocmVzcG9uc2Uucm91dGVzWzBdLmxlZ3NbMF0uc3RlcHNbMV0uaW5zdHJ1Y3Rpb25zKTtcbiAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICRzY29wZS4kZGlnZXN0KCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLHN0YXR1cyk7XG4gICAgICAgICAgICAgICAgYWxlcnQoXCJUaGVyZSBpcyBubyBkaXJlY3Rpb25zIGF2YWlsYWJsZSBiZXR3ZWVuIHRoZXNlIHR3byBwb2ludHNcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pOyBcbiAgICB9XG5cbiAgICAkc2NvcGUuZ29fcG9zaXRpb24gPSBmdW5jdGlvbigpeyBcbiAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLmRhdGFfbG9hZFtpXSk7XG4gICAgICAgICQuZ2V0SlNPTihnZW9jb2RpbmcpLmRvbmUoZnVuY3Rpb24obG9jYXRpb24pIHtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGxvY2F0aW9uKTtcbiAgICAgICAgICAgIHZhciBzdGFydCA9IGxvY2F0aW9uLnJlc3VsdHNbMF0uZm9ybWF0dGVkX2FkZHJlc3M7XG4gICAgICAgICAgICB2YXIgZW5kID0gJHNjb3BlLmRhdGFfbG9hZFszXS5kaXJlY2Npb247XG4gICAgICAgICAgICBpZighc3RhcnQgfHwgIWVuZCl7XG4gICAgICAgICAgICAgICAgYWxlcnQoXCJTdGFydCBhbmQgRW5kIGFkZHJlc3NlcyBhcmUgcmVxdWlyZWRcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHJlcXVlc3QgPSB7XG4gICAgICAgICAgICAgICAgICAgIG9yaWdpbjogc3RhcnQsXG4gICAgICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uOiBlbmQsXG4gICAgICAgICAgICAgICAgICAgIHRyYXZlbE1vZGU6IGdvb2dsZS5tYXBzLkRpcmVjdGlvbnNUcmF2ZWxNb2RlWydXQUxLSU5HJ10sXG4gICAgICAgICAgICAgICAgICAgIHVuaXRTeXN0ZW06IGdvb2dsZS5tYXBzLkRpcmVjdGlvbnNVbml0U3lzdGVtWydNRVRSSUMnXSxcbiAgICAgICAgICAgICAgICAgICAgcHJvdmlkZVJvdXRlQWx0ZXJuYXRpdmVzOiBmYWxzZVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgZGlyZWN0aW9uc1NlcnZpY2Uucm91dGUocmVxdWVzdCwgZnVuY3Rpb24ocmVzcG9uc2UsIHN0YXR1cykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICBpZiAoc3RhdHVzID09IGdvb2dsZS5tYXBzLkRpcmVjdGlvbnNTdGF0dXMuT0spIHtcbiAgICAgICAgICAgICAgICAgICAgZGlyZWN0aW9uc0Rpc3BsYXkuc2V0TWFwKG1hcCk7XG4gICAgICAgICAgICAgICAgICAgIGRpcmVjdGlvbnNEaXNwbGF5LnNldFBhbmVsKCQoXCIjZGlyZWN0aW9uc19wYW5lbFwiKS5nZXQoMCkpO1xuICAgICAgICAgICAgICAgICAgICBkaXJlY3Rpb25zRGlzcGxheS5zZXREaXJlY3Rpb25zKHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSxzdGF0dXMpO1xuICAgICAgICAgICAgICAgICAgICBhbGVydChcIlRoZXJlIGlzIG5vIGRpcmVjdGlvbnMgYXZhaWxhYmxlIGJldHdlZW4gdGhlc2UgdHdvIHBvaW50c1wiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSkgXG4gICAgfVxuXG4gICAgLy8gRWxpbWluYSAxIHggMSBjYWRhIGRhdG8gcXVlIG5vIGVzdGEgZW4gZWwgcmFuZ29cbiAgICAkc2NvcGUuZGVsID0gZnVuY3Rpb24oaW5kZXgpeyAgXG4gICAgICAgICRzY29wZS5kYXRhX2xvYWQuc3BsaWNlKGluZGV4LDEpOyAgXG4gICAgfTtcbiAgICAkc2NvcGUuZGVsX3RlbXAgPSBmdW5jdGlvbihpbmRleCl7ICBcbiAgICAgICAgJHNjb3BlLmRhdGFfcmVhbC5zcGxpY2UoaW5kZXgsMSk7ICBcbiAgICB9O1xuICAgIC8vIEhhY2UgdW4gcmVjb3JyaWRvIGFsIGFycmF5IGRlIG1hcmNhZG9yZXNcbiAgICAkc2NvcGUuc2V0TWFwT25BbGwgPSBmdW5jdGlvbihtYXApIHtcbiAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8ICRzY29wZS5uZXdfbWFya2VyLmxlbmd0aDsgaSsrKSB7IFxuICAgICAgICAgICAgJHNjb3BlLm5ld19tYXJrZXJbaV0uc2V0TWFwKG1hcCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gbGltcGlhIHRvZG9zIGxvcyBtYXJjYWRvcmVzIGEgbnVsbFxuICAgICRzY29wZS5jbGVhck1hcmtlcnMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgJHNjb3BlLnNldE1hcE9uQWxsKG51bGwpO1xuICAgIH1cbiAgICAvLyBmdW5jaW9uIGxsYW1hIGEgbGltcGlhciB0b2RvcyBsb3MgbWFyY2Fkb3Jlc1xuICAgICRzY29wZS5kZWxldGVNYXJrZXJzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICRzY29wZS5jbGVhck1hcmtlcnMoKTtcbiAgICAgICAgJHNjb3BlLm5ld19tYXJrZXIgPSBbXTtcbiAgICB9IFxuXG4gICAgJHNjb3BlLmhhbmRsZUxvY2F0aW9uRXJyb3I9IGZ1bmN0aW9uKGJyb3dzZXJIYXNHZW9sb2NhdGlvbiwgaW5mb1dpbmRvdywgcG9zKSB7XG4gICAgICAgIGluZm9XaW5kb3cuc2V0UG9zaXRpb24ocG9zKTtcbiAgICAgICAgaW5mb1dpbmRvdy5zZXRDb250ZW50KGJyb3dzZXJIYXNHZW9sb2NhdGlvbiA/XG4gICAgICAgICAgICAnRXJyb3I6IEVsIHNlcnZpY2lvIGRlIEdlb2xvY2FsaXphY2lvbiBGYWxsw7MuJyA6XG4gICAgICAgICAgICAnRXJyb3I6IFlvdXIgYnJvd3NlciBkb2VzblxcJ3Qgc3VwcG9ydCBnZW9sb2NhdGlvbi4nKTtcbiAgICB9IFxuXG4gICAgXG4gICAgXG4gICAgJHNjb3BlLmNyZWF0ZU1hcmtlciA9IGZ1bmN0aW9uKG1hcCkgeyAgXG4gICAgICAgIGlmKCRzY29wZS5kYXRhX2xvYWQgIT0gdW5kZWZpbmVkKXtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgJHNjb3BlLmRhdGFfbG9hZC5sZW5ndGg7IGkrKykgeyAgXG4gICAgICAgICAgICAgICAgdmFyIGRhdGFfdGVtcCA9ICRzY29wZS5kYXRhX2xvYWRbaV07IFxuICAgICAgICAgICAgICAgIHZhciBwb3MgPSB7XG4gICAgICAgICAgICAgICAgICBsYXQ6IHBhcnNlRmxvYXQoZGF0YV90ZW1wLmxhdCksXG4gICAgICAgICAgICAgICAgICBsbmc6IHBhcnNlRmxvYXQoZGF0YV90ZW1wLmxuZylcbiAgICAgICAgICAgICAgICB9OyBcbiAgICAgICAgICAgICAgICBpZihkYXRhX3RlbXAuaWRfc2VydmljZXMgPT09IDEpe1xuICAgICAgICAgICAgICAgICAgICB2YXIgaW1hZ2UgPSB7IFxuICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiAnLy9sb2NhbGhvc3Q6MzAwMC9hc3NldHMvYXBwL2ltYWdlcy9iYW5jby1jb2xvci5zdmcnLCBcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjYWxlZFNpemU6IG5ldyBnb29nbGUubWFwcy5TaXplKDIwLCAyMCksIFxuICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luOiBuZXcgZ29vZ2xlLm1hcHMuUG9pbnQoMCwgMCksIFxuICAgICAgICAgICAgICAgICAgICAgICAgYW5jaG9yOiBuZXcgZ29vZ2xlLm1hcHMuUG9pbnQoMCwgMCksXG4gICAgICAgICAgICAgICAgICAgICAgICBzY2FsZTogMVxuICAgICAgICAgICAgICAgICAgICB9OyAgXG4gICAgICAgICAgICAgICAgfSBcbiAgICAgICAgICAgICAgICBlbHNlIGlmKGRhdGFfdGVtcC5pZF9zZXJ2aWNlcyA9PT0gMil7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpbWFnZSA9IHsgXG4gICAgICAgICAgICAgICAgICAgICAgICB1cmw6ICcvL2xvY2FsaG9zdDozMDAwL2Fzc2V0cy9hcHAvaW1hZ2VzL2NvbWlzYXJpYS1jb2xvci5zdmcnLCBcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjYWxlZFNpemU6IG5ldyBnb29nbGUubWFwcy5TaXplKDIwLCAyMCksICBcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbjogbmV3IGdvb2dsZS5tYXBzLlBvaW50KDAsIDApLCBcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuY2hvcjogbmV3IGdvb2dsZS5tYXBzLlBvaW50KDAsIDApLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGU6IDFcbiAgICAgICAgICAgICAgICAgICAgfTsgIFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmKGRhdGFfdGVtcC5pZF9zZXJ2aWNlcyA9PT0gMyl7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpbWFnZSA9IHsgXG4gICAgICAgICAgICAgICAgICAgICAgICB1cmw6ICcvL2xvY2FsaG9zdDozMDAwL2Fzc2V0cy9hcHAvaW1hZ2VzL2hvc3BpdGFsLWNvbG9yLnN2ZycsIFxuICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGVkU2l6ZTogbmV3IGdvb2dsZS5tYXBzLlNpemUoMjAsIDIwKSwgIFxuICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luOiBuZXcgZ29vZ2xlLm1hcHMuUG9pbnQoMCwgMCksIFxuICAgICAgICAgICAgICAgICAgICAgICAgYW5jaG9yOiBuZXcgZ29vZ2xlLm1hcHMuUG9pbnQoMCwgMCksXG4gICAgICAgICAgICAgICAgICAgICAgICBzY2FsZTogMVxuICAgICAgICAgICAgICAgICAgICB9OyAgXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYoZGF0YV90ZW1wLmlkX3NlcnZpY2VzID09PSA0KXtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGltYWdlID0geyBcbiAgICAgICAgICAgICAgICAgICAgICAgIHVybDogJy8vbG9jYWxob3N0OjMwMDAvYXNzZXRzL2FwcC9pbWFnZXMvYm9tYmVyb3MtY29sb3Iuc3ZnJywgXG4gICAgICAgICAgICAgICAgICAgICAgICBzY2FsZWRTaXplOiBuZXcgZ29vZ2xlLm1hcHMuU2l6ZSgyMCwgMjApLCAgXG4gICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW46IG5ldyBnb29nbGUubWFwcy5Qb2ludCgwLCAwKSwgXG4gICAgICAgICAgICAgICAgICAgICAgICBhbmNob3I6IG5ldyBnb29nbGUubWFwcy5Qb2ludCgwLCAwKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjYWxlOiAxXG4gICAgICAgICAgICAgICAgICAgIH07ICBcbiAgICAgICAgICAgICAgICB9IFxuICAgICAgICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiT2N1cnJpbyB1biBlcnJvciBpbmVzcGVyYWRvIGVuIGxvcyBJRCBcIitkYXRhX3RlbXAuaWRfc2VydmljZXMrXCIgZGUgRW50aWRhZGVzXCIpO1xuICAgICAgICAgICAgICAgIH0gXG4gICAgICAgICAgICAgICAgdmFyIG1hcmtlciA9IG5ldyBnb29nbGUubWFwcy5NYXJrZXIoe1xuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogcG9zLFxuICAgICAgICAgICAgICAgICAgICBtYXA6IG1hcCxcbiAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uOiBnb29nbGUubWFwcy5BbmltYXRpb24uRFJPUCwgXG4gICAgICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGljb246IGltYWdlLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBkYXRhX3RlbXAuaWRfc2VydmljZXMsXG4gICAgICAgICAgICAgICAgICAgIGZvdG86IGRhdGFfdGVtcC5mb3RvLFxuICAgICAgICAgICAgICAgICAgICBub21icmVfZW1wcmVzYTogZGF0YV90ZW1wLm5vbWJyZV9lbXByZXNhLFxuICAgICAgICAgICAgICAgICAgICBkaXJlY2Npb246IGRhdGFfdGVtcC5kaXJlY2Npb25cblxuICAgICAgICAgICAgICAgIH0pOyBcbiAgICAgICAgICAgICAgICAkc2NvcGUubmV3X21hcmtlci5wdXNoKG1hcmtlcik7IFxuICAgICAgICAgICAgICAgIC8vICRzY29wZS5tYXJrZXJzX2hvdmVyKG1hcmtlcik7ICBcbiAgICAgICAgICAgICAgICBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lcihtYXJrZXIsICdjbGljaycsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5vcGVuSW5mb1dpbmRvdyh0aGlzKTsgXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZXtcbiAgICAgICAgICAgIGFsZXJ0KCdPY3VycmlvIHVuIGVycm9yIGFsIGNhcmdhcicpO1xuXG4gICAgICAgIH1cbiAgICAgICAgLy8gY29uc29sZS5sb2coJHNjb3BlLm5ld19tYXJrZXIpO1xuICAgICAgICAvL2NpZXJyYSBlbCBpbmZvd2luZG93IHVuYSB2ZXogY2FtYmllXG4gICAgICAgIGluZm9XaW5kb3cuY2xvc2UoKTtcbiAgICB9IFxuXG4gICAgZnVuY3Rpb24gdG9nZ2xlQm91bmNlKCkgeyBcbiAgICAgICAgLy8gbWFya2VyLnNldEFuaW1hdGlvbihnb29nbGUubWFwcy5BbmltYXRpb24uQk9VTkNFKTsgXG4gICAgfVxuICAgIFxuICAgIFxuICAgICRzY29wZS5tYXJrZXJzX2hvdmVyID0gZnVuY3Rpb24obGF0LCBsbmcsZm90byx0aXR1bG8sZGlyZWNjaW9uLGRhdGEpeyBcbiAgICAgICAgXG4gICAgICAgIHZhciBwb3MgPSB7fTtcbiAgICAgICAgcG9zLmxhdCA9IHBhcnNlRmxvYXQobGF0KTtcbiAgICAgICAgcG9zLmxuZyA9IHBhcnNlRmxvYXQobG5nKTsgXG4gICAgICAgIGluZm9XaW5kb3cuY2xvc2UoKTtcbiAgICAgICAgaW5mb1dpbmRvdyA9IG5ldyBnb29nbGUubWFwcy5JbmZvV2luZG93KHttYXA6IG1hcCxtYXhXaWR0aDogMjAwfSk7XG4gICAgICAgIGluZm9XaW5kb3cuc2V0UG9zaXRpb24ocG9zKTsgXG4gICAgICAgIGluZm9XaW5kb3cuc2V0Q29udGVudChcbiAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImNlbnRlciBnbG9ib191YmljYWNpb25cIj4nLCBcbiAgICAgICAgICAgICAgICAnPGltZyB3aWR0aD1cIjEwMCVcIiBzcmM9XCInK2ZvdG8rJ1wiPicsXG4gICAgICAgICAgICAgICAgJzxoNj4nK3RpdHVsbysnPC9oNj4nLCBcbiAgICAgICAgICAgICAgICAnPHA+JytkaXJlY2Npb24rJzwvcD4nLCBcbiAgICAgICAgICAgICAgICAnPC9kaXY+J1xuICAgICAgICAgICAgXS5qb2luKCcnKVxuICAgICAgICApOyBcbiAgICAgICAgJHNjb3BlLnNldF9nb29nbGVfbWFwcygpOyBcbiAgICB9IFxuXG4gICAgXG4gICAgJHNjb3BlLm9wZW5JbmZvV2luZG93ID0gZnVuY3Rpb24obWFya2VyKXtcbiAgICAgICAgaW5mb1dpbmRvdy5jbG9zZSgpOyBcbiAgICAgICAgaW5mb1dpbmRvdyA9IG5ldyBnb29nbGUubWFwcy5JbmZvV2luZG93KHttYXA6IG1hcCxtYXhXaWR0aDogMjAwfSk7XG4gICAgICAgIHZhciBwb3MgPSBtYXJrZXIucG9zaXRpb247IFxuICAgICAgICBpbmZvV2luZG93LnNldFBvc2l0aW9uKHBvcyk7IFxuICAgICAgICBpbmZvV2luZG93LnNldENvbnRlbnQoXG4gICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJjZW50ZXIgZ2xvYm9fdWJpY2FjaW9uXCI+JywgXG4gICAgICAgICAgICAgICAgJzxpbWcgd2lkdGg9XCIxMDAlXCIgc3JjPVwiJyttYXJrZXIuZm90bysnXCI+JyxcbiAgICAgICAgICAgICAgICAnPGg2PicrbWFya2VyLm5vbWJyZV9lbXByZXNhKyc8L2g2PicsIFxuICAgICAgICAgICAgICAgICc8cD4nK21hcmtlci5kaXJlY2Npb24rJzwvcD4nLCBcbiAgICAgICAgICAgICAgICAnPC9kaXY+J1xuICAgICAgICAgICAgXS5qb2luKCcnKVxuICAgICAgICApOyBcbiAgICAgICAgJHNjb3BlLnNldF9nb29nbGVfbWFwcygpO1xuICAgIH1cblxuICAgICRzY29wZS5zZXRfZ29vZ2xlX21hcHMgPSBmdW5jdGlvbigpe1xuICAgICAgICB2YXIgaXdPdXRlciA9ICQoJy5nbS1zdHlsZS1pdycpO1xuICAgICAgICB2YXIgaXdDbG9zZUJ0biA9IGl3T3V0ZXIubmV4dCgpO1xuICAgICAgICB2YXIgaXdCYWNrZ3JvdW5kID0gaXdPdXRlci5wcmV2KCk7IFxuICAgICAgICBpd0JhY2tncm91bmQuY2hpbGRyZW4oJzpudGgtY2hpbGQoMiknKS5jc3MoeydkaXNwbGF5JyA6ICdub25lJ30pOyBcbiAgICAgICAgaXdCYWNrZ3JvdW5kLmNoaWxkcmVuKCc6bnRoLWNoaWxkKDQpJykuY3NzKHsnZGlzcGxheScgOiAnbm9uZSd9KTtcbiAgICAgICAgaXdPdXRlci5wYXJlbnQoKS5wYXJlbnQoKS5jc3Moe2xlZnQ6ICc0MHB4J30pO1xuICAgICAgICBpd0JhY2tncm91bmQuY2hpbGRyZW4oJzpudGgtY2hpbGQoMSknKS5hdHRyKCdzdHlsZScsIGZ1bmN0aW9uKGkscyl7IHJldHVybiBzICsgJ2xlZnQ6IDg0cHggIWltcG9ydGFudDsnfSk7XG4gICAgICAgIGl3QmFja2dyb3VuZC5jaGlsZHJlbignOm50aC1jaGlsZCgzKScpLmF0dHIoJ3N0eWxlJywgZnVuY3Rpb24oaSxzKXsgcmV0dXJuIHMgKyAnbGVmdDogODRweCAhaW1wb3J0YW50Oyd9KTtcbiAgICAgICAgaXdCYWNrZ3JvdW5kLmNoaWxkcmVuKCc6bnRoLWNoaWxkKDMpJykuZmluZCgnZGl2JykuY2hpbGRyZW4oKS5jc3Moeydib3gtc2hhZG93JzogJ3JnYmEoMCwgMCwgMCwgMCkgMHB4IDFweCA2cHgnLCAnei1pbmRleCcgOiAnMSd9KTtcbiAgICAgICAgaXdCYWNrZ3JvdW5kLmNoaWxkcmVuKCc6bnRoLWNoaWxkKDMpJykuY2hpbGRyZW4oJzpudGgtY2hpbGQoMSknKS5maW5kKCdkaXYnKS5hdHRyKCdzdHlsZScsIGZ1bmN0aW9uKGkscyl7IHJldHVybiBzICsgJ2hlaWdodDogMjFweCAhaW1wb3J0YW50OycrJ3dpZHRoOiAxMHB4ICFpbXBvcnRhbnQ7JysnbGVmdDo3cHggIWltcG9ydGFudDsnfSk7XG4gICAgICAgIGl3QmFja2dyb3VuZC5jaGlsZHJlbignOm50aC1jaGlsZCgzKScpLmNoaWxkcmVuKCc6bnRoLWNoaWxkKDIpJykuZmluZCgnZGl2JykuYXR0cignc3R5bGUnLCBmdW5jdGlvbihpLHMpeyByZXR1cm4gcyArICdoZWlnaHQ6IDI1cHggIWltcG9ydGFudDsnKyd3aWR0aDogOXB4ICFpbXBvcnRhbnQ7J30pO1xuICAgICAgICBpd0Nsb3NlQnRuLmNzcyh7J2Rpc3BsYXknOiAnbm9uZSd9KTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLnNob3dfbWFya2VyID0gZnVuY3Rpb24oZGF0YSl7XG4gICAgICAgICRzY29wZS5tYXBhID0gJ2RldGFsbGUnOyBcbiAgICAgICAgJHNjb3BlLmhpZGVfc2VhcmNoID0gdHJ1ZTtcbiAgICAgICAgJHNjb3BlLmJvdG9uX3NlYXJjaF9nbG9iYWwgPSBmYWxzZTtcbiAgICAgICAgLy8gZm9yICh2YXIgaSA9IDA7IGkgPCBtYXJrZXIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgLy8gICAgIG1hcmtlcltpXS5zZXRNYXAobnVsbCk7XG4gICAgICAgIC8vIH0gIFxuICAgICAgICBcbiAgICAgICAgdmFyIHBvcyA9IHt9O1xuICAgICAgICBwb3MubGF0ID0gcGFyc2VGbG9hdChkYXRhLmxhdCk7XG4gICAgICAgIHBvcy5sbmcgPSBwYXJzZUZsb2F0KGRhdGEubG5nKTtcbiAgICAgICAgY29uc29sZS5sb2cocG9zKTsgXG4gICAgICAgICRzY29wZS5zaG93X2RldGFsbGUgPSB0cnVlO1xuICAgICAgICAkc2NvcGUuZGV0YWxsZSA9IGRhdGE7XG4gICAgICAgICRzY29wZS5zaG93X3BhbmVsID0gZmFsc2U7XG4gICAgICAgIC8qIGhhY2Ugem9vbSB5IHJlbmRlcml6YSBsYSBwb3NpY2lvbiAqLyBcbiAgICAgICAgdmFyIG1hcmtlciA9IG5ldyBnb29nbGUubWFwcy5NYXJrZXIoe1xuICAgICAgICAgICAgcG9zaXRpb246IHBvcyxcbiAgICAgICAgICAgIG1hcDogbWFwLFxuICAgICAgICAgICAgYW5pbWF0aW9uOiBnb29nbGUubWFwcy5BbmltYXRpb24uRFJPUCwgXG4gICAgICAgICAgICBkcmFnZ2FibGU6IGZhbHNlLCBcbiAgICAgICAgICAgIHR5cGU6IGRhdGEuaWRfc2VydmljZXMsXG4gICAgICAgICAgICBmb3RvOiBkYXRhLmZvdG8sXG4gICAgICAgICAgICBub21icmVfZW1wcmVzYTogZGF0YS5ub21icmVfZW1wcmVzYSxcbiAgICAgICAgICAgIGRpcmVjY2lvbjogZGF0YS5kaXJlY2Npb25cblxuICAgICAgICB9KTsgIFxuICAgICAgICBcbiAgICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQudHJpZ2dlcihtYXAsICdyZXNpemUnKTtcbiAgICAgICAgfSw4MDApO1xuICAgICAgICBtYXAuc2V0Wm9vbSgxNyk7XG4gICAgICAgIG1hcC5wYW5Ubyhwb3MpOyBcbiAgICB9O1xuXG4gICAgJHNjb3BlLnNlYXJjaF9nbG9iYWwgPSBmdW5jdGlvbihzZWFyY2gpe1xuICAgICAgICAkc2NvcGUubWFwYSA9ICdkZXRhbGxlJzsgXG4gICAgICAgICRzY29wZS5oaWRlX3NlYXJjaCA9IHRydWU7XG4gICAgICAgICRzY29wZS5zaG93X2RldGFsbGUgPSBmYWxzZTsgXG4gICAgICAgICRzY29wZS5zaG93X3BhbmVsID0gdHJ1ZTsgXG4gICAgICAgICRzY29wZS5ib3Rvbl9zZWFyY2hfZ2xvYmFsID0gZmFsc2U7XG4gICAgICAgICRzY29wZS5sb2FkKHNlYXJjaCwxMCwxKTtcbiAgICAgICAgJHNjb3BlLmNyZWF0ZU1hcmtlcihtYXApO1xuXG4gICAgfVxuICAgICRzY29wZS5yZXR1cm4gPSBmdW5jdGlvbigpe1xuICAgICAgICAkc2NvcGUubWFwYSA9ICdmdWxsJzsgXG4gICAgICAgICRzY29wZS5zaG93X2RldGFsbGUgPSBmYWxzZTsgXG4gICAgICAgICRzY29wZS5zaG93X3BhbmVsICAgPSB0cnVlO1xuICAgICAgICAkc2NvcGUuaGlkZV9zZWFyY2ggID0gZmFsc2U7XG4gICAgICAgICRzY29wZS5ib3Rvbl9zZWFyY2hfZ2xvYmFsID0gdHJ1ZTsgXG4gICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LnRyaWdnZXIobWFwLCAncmVzaXplJyk7XG4gICAgICAgIH0sNTAwKTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmNvbW9fbGxlZ2FyID0gZnVuY3Rpb24obGF0LCBsbmcpeyBcbiAgICAgICAgJHNjb3BlLnNob3dfZGV0YWxsZSAgICAgPSBmYWxzZTsgXG4gICAgICAgICRzY29wZS5zaG93X3BhbmVsICAgICAgID0gZmFsc2U7XG4gICAgICAgICRzY29wZS5oaWRlX3NlYXJjaCAgICAgID0gdHJ1ZTtcbiAgICAgICAgJHNjb3BlLmJvdG9uX3NlYXJjaF9nbG9iYWwgPSBmYWxzZTsgXG5cbiAgICAgICAgdmFyIGdlb2NvZGluZyA9ICdodHRwczovL21hcHMuZ29vZ2xlYXBpcy5jb20vbWFwcy9hcGkvZ2VvY29kZS9qc29uP2xhdGxuZz0nICsgbGF0ICsgJywnICsgbG5nICsgJyZzZW5zb3I9ZmFsc2UnO1xuICAgICAgICBjb25zb2xlLmxvZyhnZW9jb2RpbmcpO1xuXG5cbiAgICAgICAgLy8gbW9zdHJhciBlbCBoZWFkZXIgZGUgaW5kaWNhZG9yXG4gICAgICAgICRzY29wZS5oZWFkZXJfc2VhcmNoID0gZmFsc2U7XG5cbiAgICAgICAgJC5nZXRKU09OKGdlb2NvZGluZykuZG9uZShmdW5jdGlvbihsb2NhdGlvbikge1xuICAgICAgICAgICAgY29uc29sZS5sb2cobG9jYXRpb24ucmVzdWx0c1swXS5mb3JtYXR0ZWRfYWRkcmVzcyk7XG4gICAgICAgICAgICAkc2NvcGUuaW5wdXRfZW5kID0gbG9jYXRpb24ucmVzdWx0c1swXS5mb3JtYXR0ZWRfYWRkcmVzcztcbiAgICAgICAgICAgICRzY29wZS4kZGlnZXN0KCk7XG5cbiAgICAgICAgfSk7IFxuXG4gICAgfVxuXG4gICAgJHNjb3BlLnNob3dfZGV0YWxsZV9pbmRpY2FjaW9uZXMgPSBmdW5jdGlvbigpe1xuICAgICAgICAkc2NvcGUuZGV0YWxsZV9kaXN0YW5jaWEgPSB0cnVlO1xuICAgIH1cblxuICAgICRzY29wZS5jbG9zZV9pbmRpY2FjaW9uID0gZnVuY3Rpb24oKXtcbiAgICAgICAgZGlyZWN0aW9uc0Rpc3BsYXkuc2V0TWFwKG51bGwpO1xuICAgICAgICAkc2NvcGUubWFwYSA9ICdmdWxsJztcbiAgICAgICAgJHNjb3BlLmlucHV0X2VuZCA9IFwiXCI7XG4gICAgICAgICRzY29wZS5pbnB1dF9zdGFydCA9IFwiXCI7ICAgXG4gICAgICAgICRzY29wZS5oZWFkZXJfc2VhcmNoID0gdHJ1ZTtcbiAgICAgICAgJHNjb3BlLmhpZGVfc2VhcmNoICAgICA9IGZhbHNlO1xuICAgICAgICAkc2NvcGUuaW5kaWNhY2lvbl9kZXRhbGxlID0gZmFsc2U7XG4gICAgICAgICRzY29wZS5ib3Rvbl9zZWFyY2hfZ2xvYmFsID0gdHJ1ZTsgIFxuICAgICAgICAkc2NvcGUuc2hvd19kZXRhbGxlICAgICA9IGZhbHNlO1xuICAgICAgICAkc2NvcGUuc2hvd19wYW5lbCAgICAgICA9IHRydWU7XG4gICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LnRyaWdnZXIobWFwLCAncmVzaXplJyk7XG4gICAgICAgIH0sNTAwKTtcbiAgICB9XG5cbiBcbiBcbn1dKTsgXG5tb2RlbC5kaXJlY3RpdmUoJ3Rvb2x0aXAnLCBmdW5jdGlvbigpe1xuICAgIHJldHVybiB7XG4gICAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycyl7XG4gICAgICAgICAgICAkKGVsZW1lbnQpLmhvdmVyKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgLy8gb24gbW91c2VlbnRlclxuICAgICAgICAgICAgICAgICQoZWxlbWVudCkudG9vbHRpcCgnc2hvdycpO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAvLyBvbiBtb3VzZWxlYXZlXG4gICAgICAgICAgICAgICAgJChlbGVtZW50KS50b29sdGlwKCdoaWRlJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG59KTtcbn0pKCk7XG5cbi8qIFxuICAgIDEuIGN1YW5kbyBlbCB1c3VhcmlvIGVzY3JpYmEgbGUgbXVlc3RyZSB1biBsaXN0YWRvIGRlIGVudGlkYWRlc1xuICAgIDIuIGN1YW5kbyBzZSB1YmljYSBubyBoYXlhIG1hcmNhZG9yZXNcbiAgICAzLiBsaW1pdGFjaW9uZXM6IHRvZG9zIGxvcyB1c3VhcmlvcyB0aWVuZW4gcXVlIGNvbnRhciBjb24gdW4gc21hcnRwaG9uZSBxdWUgdGVuZ2EgZ3BzXG4qLyJdfQ==
